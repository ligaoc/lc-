# GitHub 仓库管理工具 - 新增功能说明

## 🆕 最新添加的功能

### 5. 同步代码功能优化 🚀🆕
- **按钮位置**: 仓库管理区 "同步代码"
- **重大更新**: 全新的双向同步和文件选择功能
- **新功能特性**:
  - 📋 **文件勾选功能**: 支持选择性同步文件（默认全选非相同文件）
  - 🔄 **双向同步**: 支持本地→远程、远程→本地、双向智能同步
  - 📊 **智能文件比较**: 实时显示文件状态和建议的同步方向
  - ✅ **批量选择控制**: 全选、全不选、选择已修改文件
  - 👆 **双击切换**: 双击文件可切换选择状态
  - 📈 **实时统计**: 显示选中文件数量和状态分布

- **同步方向选项**:
  - 📤 **本地 → 远程 (上传)**: 将本地文件上传到 GitHub
  - 📥 **远程 → 本地 (下载)**: 将 GitHub 文件下载到本地
  - 🔄 **双向同步 (智能)**: 根据文件状态智能决定同步方向

- **文件状态显示**:
  - ✅ **相同**: 本地和远程文件内容一致
  - 🔄 **已修改**: 本地和远程文件内容不同
  - ➕ **仅本地**: 文件只存在于本地
  - 📥 **仅远程**: 文件只存在于远程

- **使用方法**:
  1. 在仓库列表中选择要同步的仓库
  2. 点击 "同步代码" 按钮
  3. 选择同步方向（本地→远程/远程→本地/双向）
  4. 选择同步模式（智能同步/强制覆盖/仅预览）
  5. 等待文件扫描和比较完成
  6. 使用批量选择按钮或双击文件来选择要同步的文件
  7. 点击 "🚀 开始同步" 执行同步操作
  8. 查看实时进度和详细日志

- **批量选择功能**:
  - ✅ **全选**: 选择所有文件
  - ❌ **全不选**: 取消选择所有文件
  - 🔄 **选择已修改**: 只选择有变化的文件

### 1. 创建文件夹功能
- **按钮位置**: 文件操作区 "创建文件夹"
- **功能说明**: 在当前位置创建新文件夹
- **实现方式**: 由于 GitHub 不支持空文件夹，程序会自动在新文件夹中创建 `.gitkeep` 文件
- **使用方法**: 
  1. 点击 "创建文件夹" 按钮
  2. 输入文件夹名称
  3. 确认创建

### 2. 上传文件夹功能
- **按钮位置**: 文件操作区 "上传 ▼" 下拉菜单
- **功能选项**:
  - 上传文件(多选) - 原有功能
  - 上传文件夹 - 新增功能
- **功能说明**: 
  - 选择本地文件夹，保持完整目录结构上传到 GitHub
  - 支持多级目录结构
  - 自动处理文件编码（UTF-8/GBK）
  - 实时显示上传进度和结果

### 3. 智能覆盖功能（已优化）
- **文件状态显示**:
  - "新建" - 新文件
  - "覆盖现有" - 会覆盖现有文件
  - "新建(GBK)" / "覆盖现有(GBK)" - GBK 编码文件
- **自动处理**: 无需手动管理 SHA 值，程序自动处理

### 4. 仓库代码执行功能 🆕
- **按钮位置**: 仓库管理区 "执行代码"
- **功能说明**: 
  - 智能下载选中仓库的代码到本地
  - 支持增量更新，只下载变更文件 🆕
  - 自动扫描可执行文件（.py, .js, .java, .cpp, .sh 等）
  - 提供图形化文件选择界面
  - 支持自定义执行命令
  - 在新终端窗口中运行程序
  - 多线程处理，避免界面卡死
  - 智能错误处理和调试支持
- **使用方法**:
  1. 在仓库列表中选择要执行的仓库
  2. 点击 "执行代码" 按钮
  3. 选择下载模式：🧠 智能模式(推荐) / ⚡ 增量更新 / 🔄 完整下载 🆕
  4. 等待仓库下载完成（查看进度条和操作日志）
  5. 在文件列表中选择要运行的文件
  6. 可选：自定义执行命令（使用 {file} 占位符）
  7. 点击 "开始执行" 运行程序
  8. 程序会在新终端窗口中运行
- **辅助功能**:
  - 📋 **操作日志**: 实时显示详细的操作步骤和状态
  - 🧪 **测试选择**: 测试当前选中文件的信息和执行命令
  - 🔍 **调试信息**: 查看完整的环境和文件信息
  - 🔄 **重新扫描**: 刷新可执行文件列表
- **下载模式**: 🆕
  - 🧠 **智能模式**(推荐): 自动根据仓库大小选择最优下载方式
  - ⚡ **增量更新**: 只下载变更的文件，大幅提升更新速度
  - 🔄 **完整下载**: 重新下载所有文件，确保完整同步
- **本地存储**: 代码下载到 `当前目录/执行代码/仓库名/` 文件夹中
- **缓存机制**: 自动保存 `.repo_cache.json` 文件追踪文件状态 🆕
- **支持平台**: Windows、macOS、Linux

## 🎯 完整功能列表

### 仓库管理
- ✅ 查看所有仓库列表
- ✅ 创建新仓库
- ✅ 编辑仓库信息
- ✅ 删除仓库
- ✅ 权限检查
- ✅ 仓库代码执行 🆕
- 🚀 **双向代码同步** 🆕

### 文件管理
- ✅ 浏览文件和目录
- ✅ 创建文件
- ✅ 创建文件夹 🆕
- ✅ 编辑文件内容
- ✅ 删除文件
- ✅ 下载文件

### 上传功能
- ✅ 上传单个文件
- ✅ 上传多个文件
- ✅ 上传整个文件夹 🆕
- ✅ 保持目录结构
- ✅ 智能覆盖现有文件
- ✅ 实时进度显示

### 代码执行
- ✅ 智能下载仓库代码到本地 🆕
- ✅ 增量更新支持（只下载变更文件）🆕
- ✅ 多种下载模式选择 🆕
- ✅ 自动扫描可执行文件 🆕
- ✅ 图形化文件选择 🆕
- ✅ 自定义执行命令 🆕
- ✅ 跨平台终端支持 🆕

### 代码同步 🆕
- 🚀 **文件选择性同步**（支持勾选文件）🆕
- 🚀 **双向同步支持**（本地↔远程）🆕
- 🚀 **智能文件比较**（实时状态显示）🆕
- 🚀 **批量选择控制**（全选/全不选/选择已修改）🆕
- 🚀 **同步方向可选**（上传/下载/双向）🆕
- 🚀 **实时进度跟踪**（上传/下载统计）🆕

### 其他特性
- ✅ 多线程操作
- ✅ 编码兼容（UTF-8/GBK）
- ✅ 错误处理和恢复
- ✅ 用户友好界面
- 🚀 **增强的文件状态显示** 🆕
- 🚀 **双向文件比较和同步** 🆕

## 🚀 使用建议

1. **创建项目结构**: 使用 "创建文件夹" 功能建立项目目录结构
2. **批量上传**: 使用 "上传文件夹" 功能快速上传整个项目
3. **权限检查**: 遇到问题时先使用 "检查权限" 功能确认 Token 权限
4. **文件覆盖**: 程序会自动处理文件覆盖，无需担心 SHA 值问题
5. **代码执行**: 使用 "执行代码" 功能快速下载并运行仓库中的代码 🆕
6. **智能同步**: 使用 "同步代码" 功能实现本地和远程的双向同步 🆕
7. **选择性同步**: 根据需要勾选要同步的文件，避免不必要的传输 🆕

## 💡 注意事项

- GitHub 不支持空文件夹，创建文件夹会自动添加 `.gitkeep` 文件
- 上传文件夹时会保持完整的目录结构
- 程序支持 UTF-8 和 GBK 编码的文本文件
- 大文件或二进制文件可能需要使用 Git 客户端操作
- 代码执行功能需要本地安装相应的运行环境（如 Python、Node.js 等）
- 下载的代码保存在程序运行目录的 "执行代码" 文件夹中
- 执行代码前请确保代码来源安全可信
- 程序会自动处理仓库名中的特殊字符和空格，确保下载链接正确
- 增量更新功能会自动创建 `.repo_cache.json` 缓存文件，请勿手动删除 🆕
- 智能模式：小于10MB仓库使用完整下载，大于10MB仓库使用增量更新 🆕
- **同步功能**: 建议先使用预览模式查看将要同步的文件，确认无误后再执行 🆕
- **双向同步**: 双向模式会智能判断文件的同步方向，但建议定期备份重要文件 🆕

## 🔧 常见问题解决

### 文件被占用错误 (WinError 32)
**错误信息**: "另一个程序正在使用此文件，进程无法访问"

**解决方案**:
1. **关闭相关程序**: 关闭可能打开目标目录文件的程序（文本编辑器、资源管理器等）
2. **等待重试**: 等待几秒钟后重新执行下载
3. **重启程序**: 完全关闭并重新启动程序
4. **强制完整下载**: 选择"🔄 完整下载"模式重新下载
5. **重启电脑**: 如果问题持续，重启电脑可解决文件句柄冲突

**预防措施**:
- 避免在下载过程中打开目标目录
- 关闭不必要的文件编辑器和资源管理器窗口

### 同步冲突处理 🆕
**问题**: 本地和远程文件都有修改，不知道如何同步

**解决方案**:
1. **使用预览模式**: 先选择"📋 仅预览"查看详细的文件对比
2. **分别处理**: 手动选择要上传或下载的文件
3. **备份重要文件**: 同步前备份重要的本地修改
4. **使用双向模式**: 让程序智能决定同步方向（默认保留本地版本）

### 文件编码问题
**问题**: 上传或下载时出现编码错误

**解决方案**:
- 程序会自动尝试 UTF-8 和 GBK 编码
- 对于特殊编码文件，建议先转换为 UTF-8 格式
- 二进制文件会使用 base64 编码处理 